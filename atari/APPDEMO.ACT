; Program: APPDEMO.ACT›; Author.: Wade Ripkowski›; Date...: 2021.01›; Desc...: Demo Application   ›; License: GNU General Public License v3.0›; Notes..: MUST run BIGST.ACT 1st w/›;          bigST='D›;          Then: SET $495=12››; Include library›INCLUDE "D1:DEFINES.ACT"›INCLUDE "D1:DEFWIN.ACT"›INCLUDE "D1:LIBSTR.ACT"›INCLUDE "D1:LIBWIN.ACT"›INCLUDE "D1:LIBMISC.ACT"›INCLUDE "D1:LIBGADG.ACT"›INCLUDE "D1:LIBMENU.ACT"››; Start›MODULE››; -----------------------------------›; Func..: FormInput()›; Desc..: Demo use of input gadgets›; Return: TRUE if accepted, or FALSE›; -----------------------------------›BYTE FUNC FormInput()›BYTE bR=[FALSE]›BYTE bW1,bM,bA,bB,bC,bD›BYTE bRA,bRB,bRAp,bRBp›BYTE bCha,bChb,bChc,bChap,bChbp,bChcp›CHAR ARRAY cA(41),cB(41),cC(41),cD(41)›CARD ARRAY aB(2)›CARD ARRAY rA(3),rB(3)››; Strings used for navigation footer›CHAR ARRAY cF="Nav:   "›CHAR ARRAY cI="Nav:^cS^cE"›CHAR ARRAY cR="Nav:   "›CHAR ARRAY cX="Nav:X      "››; Setup buttons›; Element 0 will be seletion 1›aB(0)="[ Ok ]"›aB(1)="[Cancel]"››; Set radio buttons and defaults›rA(0)="One"›rA(1)="Two"›rA(2)="Three"›rB(0)="Choice A"›rB(1)="Choice B"›rB(2)="Choice C"›bRA=1›bRB=1›bRAp=bRA›bRBp=bRB››; Prep strings›SCopy(cA,"-100.00                                 ")›SCopy(cB,"This string has something to edit in it!")›SCopy(cC,"                                        ")›SCopy(cD,"Any String!                           ")››; Set checkbox defaults for previous›bChap=GCOFF›bChbp=GCON›bChcp=GCOFF›                            ›; Open window & draw contents›bW1=WOpen(2,4,36,17,WOFF)›WOrn(bW1,WPTOP,WPLFT,"Input Form")›WOrn(bW1,WPTOP,WPRGT,"Edit")›WOrn(bW1,WPBOT,WPLFT,cF)››WPrint(bW1,1,1,"Data Fields")›WPrint(bW1,2,2,"Numer:")›WPrint(bW1,2,3,"Alpha:")›WPrint(bW1,2,4,"AlNum:")›WPrint(bW1,2,5,"Any..:")››WPrint(bW1,1,7,"Radio Buttons (horiz)")›GRadio(bW1,2,8,GHORZ,GDISP,bRAp,3,rA)››WPrint(bW1,1,10,"Radio Buttons")›GRadio(bW1,2,11,GVERT,GDISP,bRBp,3,rB)›               ›WPrint(bW1,20,10,"Check Boxes")›WPrint(bW1,25,11,"Milk")›WPrint(bW1,25,12,"Bread")›WPrint(bW1,25,13,"Butter")›GCheck(bW1,21,11,GDISP,bChap)›GCheck(bW1,21,12,GDISP,bChbp)›GCheck(bW1,21,13,GDISP,bChcp)››GButton(bW1,21,15,GDISP,2,aB)››; Display fields as is›WPrint(bW1,8,2,cA)›WPrint(bW1,8,3,cB)›WPrint(bW1,8,4,cC)›WPrint(bW1,8,5,cD)››; Loop until form accepted or cancelled›DO›  ; Set initial menu selection›  bM=1››  ; Loop until user ESCapes or TABs out›  DO›    ; Cycle through fields›    bM=MenuV(bW1,2,2,WOFF,bM,5,"NumerAlphaAlNumAny..")›    ›    ; Edit the chosen field›    if bM=1 then›      WOrn(bW1,WPBOT,WPLFT,cI)›      bA=GInput(bW1,8,2,GNUMER,27,cA)›      WOrn(bW1,WPBOT,WPLFT,cF)››    elseif bM=2 then›      WOrn(bW1,WPBOT,WPLFT,cI)›      bB=GInput(bW1,8,3,GALPHA,27,cB) ›      WOrn(bW1,WPBOT,WPLFT,cF)››    elseif bM=3 then›      WOrn(bW1,WPBOT,WPLFT,cI)›      bC=GInput(bW1,8,4,GALNUM,27,cC) ›      WOrn(bW1,WPBOT,WPLFT,cF)››    elseif bM=4 then›      WOrn(bW1,WPBOT,WPLFT,cI)›      bD=GInput(bW1,8,5,GANY,27,cD) ›      WOrn(bW1,WPBOT,WPLFT,cF)›    fi›  UNTIL bM=XESC or bM=XTAB›  OD››  ; Display radio buttons - horizontal›  WOrn(bW1,WPBOT,WPLFT,cR)›  bRA=GRadio(bW1,2,8,GHORZ,GEDIT,bRAp,3,rA)›  if bRA#XESC and bRA#XTAB then›    bRAp=bRA›  fi›  GRadio(bW1,2,8,GHORZ,GDISP,bRAp,3,rA)››  ; Display radio buttons - veritcal›  bRB=GRadio(bW1,2,11,GVERT,GEDIT,bRBp,3,rB)›  if bRB#XESC and bRB#XTAB then›    bRBp=bRB›  fi›  GRadio(bW1,2,11,GVERT,GDISP,bRBp,3,rB)›  WOrn(bW1,WPBOT,WPLFT,cF)››  ; Check boxes, set footer›  WOrn(bW1,WPBOT,WPLFT,cX)››  ; Stay on this check until ESC, TAB, or SET›  DO›    ; Display button and get choice›    bCha=GCheck(bW1,21,11,GEDIT,bChap)››    ; If ESC or TAB, exit loop›    if bCha=XESC or bCha=XTAB then›      exit›    else›      ; Else, assign return to previous›      bChap=bCha›    fi›  OD››  ; Stay on this check until ESC, TAB, or SET›  DO                           ›    bChb=GCheck(bW1,21,12,GEDIT,bChbp)››    ; If ESC or TAB, exit loop›    if bChb=XESC or bChb=XTAB then›      exit›    else›      ; Else, assign return to previous›      bChbp=bChb›    fi›  OD››  ; Stay on this check until ESC, TAB, or SET›  DO›    bChc=GCheck(bW1,21,13,GEDIT,bChcp)››    ; If ESC or TAB, exit loop›    if bChc=XESC or bChc=XTAB then›      exit›    else›      ; Else, assign return to previous›      bChcp=bChc›    fi›  OD››  ; Restore footer        ›  WOrn(bW1,WPBOT,WPLFT,cF)››  ; If ESC out of fields, dont do buttons›  if bM#XESC then›    ; Prompt for form acceptance›    bM=GButton(bW1,21,15,1,2,aB)››    ; Redraw buttons›    GButton(bW1,21,15,GDISP,2,aB)›  fi›UNTIL bM#XTAB›OD››; Do something with data if accepted, set true exit›if bM=1 then›  bR=TRUE›  GAlert("Doing something with entered data...")›fi›             ›; Close window›WClose(bW1)››RETURN(bR)››››; -----------------------------------›; Proc..: ProgTest()›; Descr.: Demos window status and›;         progress bar.›; -----------------------------------›PROC ProgTest()›BYTE bW1,bW2,bL,bS›INT iV››; Open status window›bW1=WOpen(9,2,20,14,WOFF)›WOrn(bW1,WPTOP,WPLFT,"Status")›WPrint(bW1,1,1,"Window Status")›WPrint(bW1,1,2,"------ ------")››; Open progress bar window›bW2=WOpen(7,18,24,4,WOFF)›WPrint(bW2,2,1,"Progress:")››; Display initial progress bar›GProg(bW2,2,2,0)››; Loop through each window handle›for bL=0 to 9›DO›  ; Get the status›  bS=WStat(bL)››  ; Print the window handle #›  WPos(bW1,6,3+bL)›  WPut(bW1,bL+48)››  ; Print the handle status›  if bS=WON then›    WPrint(bW1,8,3+bL,"Used")›  else›    WPrint(bW1,8,3+bL,"Free")›  fi››  ; Update progress bar›  iV=((bL+1) MOD 10)*10›  if iV=0 then›    iV=100›  fi›  GProg(bW2,2,2,iV)››  ; Wait 1 second›  Wait(1)›OD››GAlert(" Press a key to continue. ")››; Close windows›WClose(bW2)›WClose(bW1)››RETURN››                   ›; -----------------------------------›; Proc: About()›; Desc: About Dialog›; -----------------------------------›PROC About()›BYTE bW1››; Show window›bW1=WOpen(1,6,38,14,WOFF)›WOrn(bW1,WPTOP,WPLFT,"About")›WPrint(bW1,WPCNT,1,"Demo Application")›WPrint(bW1,WPCNT,2,"Version 1.00")›WPrint(bW1,WPCNT,3,"(C) 2021  Wade Ripkowski")›WPrint(bW1,WPCNT,5,"Application to demonstrate")›WPrint(bW1,WPCNT,6,"the Action! library.")›WPrint(bW1,2,8, "V1-2021-Atari8: Action!")›WPrint(bW1,WPCNT,12," Ïë ")››; Wait for key›WaitKC()››; Close window›WClose(bW1)››RETURN›››; -----------------------------------›; Proc: SubMenu()›; Desc: Sub menu routine ›; -----------------------------------›PROC SubMenu()›BYTE bW1,bCh›CHAR ARRAY cM(37)››; Open window›bW1=WOpen(16,10,14,5,WOFF)›WOrn(bW1,WPTOP,WPLFT,"Sub-Menu")››; Build menu›SCopy(cM," Sub-Item 1  Sub-Item 2  Sub-Item 3 ")››; Do until exit›DO                    ›  ; Display menu and get choice›  bCh=MenuV(bW1,1,1,WOFF,1,12,cM)››  ; Process choice›  if bCh=XESC then›    exit››  elseif bCh=1 then›    GAlert(" Sub-Item 1 selected. ")››  elseif bCh=2 then›    GAlert(" Sub-Item 2 selected. ")››  elseif bCh=3 then›    GAlert(" Sub-Item 3 selected. ")›  fi›OD››; Close window›WClose(bW1)››RETURN››                        ›; -----------------------------------›; Proc: Main()›; Desc: Main routine›; -----------------------------------›PROC Main()›BYTE bW1,bW2,bCh›CHAR ARRAY cM(71)››; Init Window System›WInit()›      ›; Set Background         ›WBack(14)››; Open header window›bW1=WOpen(0,0,40,3,WON)›WPrint(bW1,WPCNT,1,"D E M O N S T R A T I O N")››; Open menu window›bW2=WOpen(12,7,16,9,WOFF)›WOrn(bW2,WPTOP,WPLFT,"Menu")››; Build menu›SCopy(cM," Input Form    Progress Bar  Sub-Menu      About         Exit         ")››; Do until exit›DO›  ; Display menu and get choice›  bCh=MenuV(bW2,1,2,WOFF,1,14,cM)››  ; Process choice›  if bCh=1 then›    FormInput()››  elseif bCh=2 then›    ProgTest()››  elseif bCh=3 then›    SubMenu()››  elseif bCh=4 then›    About()››  elseif bCh=XESC or bCh=5 then›    exit›  fi›OD››; Close windows›WClose(bW2)›WClose(bW1)››RETURN›      ›